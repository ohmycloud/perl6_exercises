<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>~/work/rakudo/modules/Text/VimColour/input.p6.html</title>
<meta name="Generator" content="Vim/7.4">
<meta name="plugin-version" content="vim7.4_v1">
<meta name="syntax" content="perl6">
<meta name="settings" content="no_progress,use_css,pre_wrap,no_foldcolumn,prevent_copy=">
<meta name="colorscheme" content="none">
<style type="text/css">
<!--
pre { white-space: pre-wrap; font-family: monospace; color: #000000; background-color: #ffffff; }
body { font-family: monospace; color: #000000; background-color: #ffffff; }
* { font-size: 1em; }
.Type { color: #008000; text-decoration: underline; }
.Statement { color: #008080; font-weight: bold; }
.Comment { color: #c00000; font-weight: bold; }
.Constant { color: #0000c0; text-decoration: underline; }
.Special { color: #c000c0; font-weight: bold; }
.PreProc { color: #c000c0; text-decoration: underline; }
.Identifier { color: #804000; text-decoration: underline; }
-->
</style>

<script type='text/javascript'>
<!--

-->
</script>
</head>
<body>
<pre id='vimCodeElement'>
<span class="Comment">#!/usr/bin/env perl6</span>

<span class="PreProc">use</span> <span class="Statement">v</span><span class="Constant">6</span><span class="Statement">;</span>
<span class="PreProc">use</span> Text::VimColour<span class="Statement">;</span>        <span class="Comment"># silly Brits.  Too many &quot;u&quot;s but not enough gunz!</span>


<span class="Comment">#`{</span>
    Uses vim <span class="Identifier">to</span> produce HTML that's syntax-colored <span class="PreProc">as</span> the installed vim would
    <span class="Special">do</span> it<span class="Statement">.</span>

    You have <span class="Identifier">to</span> have vim <span class="Statement">&gt;=</span> <span class="Constant">7.4</span> installed on the system<span class="Statement">,</span> <span class="Statement">and</span> you have <span class="Identifier">to</span> have
    the appropriate syntax files installed<span class="Statement">.</span>


    This <span class="PreProc">is</span> sometimes a little ugly <span class="Special">when</span> being <span class="Identifier">run</span> (see the perl5 <span class="Type">bit</span>)<span class="Statement">,</span> <span class="PreProc">but</span> it
    <span class="PreProc">does</span> work <span class="Identifier">to</span> produce nicely-colored HTML pages<span class="Statement">.</span>




    Don't <span class="Statement">try</span> <span class="Identifier">to</span> <span class="PreProc">use</span> this script <span class="PreProc">as</span> the input file<span class="Statement">.</span>  Somebody (probably vim)
    <span class="Identifier">is</span> having trouble opening this file <span class="Statement">while</span> it's running <span class="PreProc">as</span> a script<span class="Statement">.</span>  So
    <span class="Special">make</span> a <span class="Special">copy</span> <span class="PreProc">of</span> this <span class="Statement">and</span> <span class="PreProc">use</span> that <span class="Special">copy</span> <span class="PreProc">as</span> input<span class="Statement">.</span>
}


<span class="Statement">if</span> <span class="Type">False</span> {  <span class="Comment"># input is hard-coded here - no good# {{{</span>
    <span class="Comment">### Doesn't do diddly shit.</span>
    <span class="Comment">### But honestly, you'd never use it this way anyhow.</span>
    Text::VimColour<span class="Statement">.</span><span class="Identifier">new</span>(
        <span class="Constant">lang</span> <span class="Statement">=&gt;</span> <span class="Special">&quot;</span><span class="Constant">perl6</span><span class="Special">&quot;</span><span class="Statement">,</span>
        <span class="Constant">code</span> <span class="Statement">=&gt;</span> <span class="Special">&quot;</span><span class="Constant">print 'y helo thar';</span><span class="Special">&quot;</span><span class="Statement">,</span>
        <span class="Constant">out</span>  <span class="Statement">=&gt;</span> <span class="Special">'</span><span class="Constant">this_file_never_gets_produced.html</span><span class="Special">'</span><span class="Statement">,</span>
    )<span class="Statement">;</span>
}<span class="Comment"># }}}</span>

<span class="Statement">if</span> <span class="Type">True</span> {  <span class="Comment"># perl5 input - partially good# {{{</span>

    <span class="Comment">### Appears to blows up, but actually works.</span>
    <span class="Comment">###</span>
    <span class="Comment">### This produces a multiline error telling you that it failed to run the </span>
    <span class="Comment">### requested vim command because &quot;exit code 1&quot;.</span>
    <span class="Comment">###</span>
    <span class="Comment">### HOWEVER, &quot;perl.html&quot; does get produced, and it's (mostly, at least) </span>
    <span class="Comment">### correct HTML version of vim's syntax coloring of the perl5 &quot;input.pl&quot;.</span>
    Text::VimColour<span class="Statement">.</span><span class="Identifier">new</span>(
        <span class="Constant">lang</span> <span class="Statement">=&gt;</span> <span class="Special">&quot;</span><span class="Constant">perl</span><span class="Special">&quot;</span><span class="Statement">,</span>
        <span class="Constant">in</span> <span class="Statement">=&gt;</span> <span class="Special">&quot;</span><span class="Constant">input.pl</span><span class="Special">&quot;</span><span class="Statement">,</span>
        <span class="Constant">out</span>  <span class="Statement">=&gt;</span> <span class="Special">'</span><span class="Constant">perl.html</span><span class="Special">'</span><span class="Statement">,</span>
    )<span class="Statement">;</span>
}<span class="Comment"># }}}</span>
<span class="Statement">if</span> <span class="Type">False</span> {  <span class="Comment"># perl6 input - works fine.# {{{</span>

    <span class="Comment">### Specify the outfile here in the code</span>
    Text::VimColour<span class="Statement">.</span><span class="Identifier">new</span>(
        <span class="Constant">lang</span> <span class="Statement">=&gt;</span> <span class="Special">&quot;</span><span class="Constant">perl6</span><span class="Special">&quot;</span><span class="Statement">,</span>
        <span class="Constant">in</span> <span class="Statement">=&gt;</span> <span class="Special">&quot;</span><span class="Constant">input.p6</span><span class="Special">&quot;</span><span class="Statement">,</span>       <span class="Comment"># a copy of this file.</span>
        <span class="Constant">out</span>  <span class="Statement">=&gt;</span> <span class="Special">'</span><span class="Constant">perl6.html</span><span class="Special">'</span><span class="Statement">,</span>
    )<span class="Statement">;</span>

    <span class="Comment">### Or get the HTML returned to us as a string and produce the outfile </span>
    <span class="Comment">### ourselves.</span>
    <span class="Special">my</span> <span class="Identifier">$</span><span class="Identifier">out</span> <span class="Statement">=</span> Text::VimColour<span class="Statement">.</span><span class="Identifier">new</span>(
        <span class="Constant">lang</span> <span class="Statement">=&gt;</span> <span class="Special">&quot;</span><span class="Constant">perl6</span><span class="Special">&quot;</span><span class="Statement">,</span>
        <span class="Constant">in</span> <span class="Statement">=&gt;</span> <span class="Special">&quot;</span><span class="Constant">input.p6</span><span class="Special">&quot;</span><span class="Statement">,</span>
    )<span class="Statement">.</span>html-full-page<span class="Statement">;</span>
    <span class="Special">'</span><span class="Constant">perl6_2.html</span><span class="Special">'</span><span class="Statement">.</span><span class="Type">IO</span><span class="Statement">.</span>spurt(<span class="Identifier">$</span><span class="Identifier">out</span>)<span class="Statement">;</span>
}<span class="Comment"># }}}</span>

</pre>
</body>
</html>
<!-- vim: set foldmethod=manual : -->
